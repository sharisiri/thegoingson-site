<!DOCTYPE html>
<html>
<head>
	<title>the goings on</title>
	 <meta name="description" content="twelve new tunes, curated weekly.">
	 <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, shrink-to-fit=no, user-scalable=no">
	<meta charset="utf-8">
	<link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
	<link rel="manifest" href="icons/site.webmanifest">
	<link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#1f1f1f">
	<link rel="shortcut icon" href="icons/favicon.ico">
	<meta name="msapplication-TileColor" content="#000000">
	<meta name="msapplication-config" content="icons/browserconfig.xml">
	<meta name="theme-color" content="#000000">
	<style type="text/css">
		@font-face {
		  font-family: 'IBM Plex Mono';
		  font-style: normal;
		  font-weight: 400;
		  src: local("IBM Plex Mono"), local("IBMPlexMono"), url("fonts/IBMPlexMono-Regular-Latin3.woff2") format("woff2"), url("fonts/IBMPlexMono-Regular-Latin3.woff") format("woff");
		  unicode-range: 'U+0102-0103, U+1EA0-1EF9, U+20AB'; }

		@font-face {
		  font-family: 'IBM Plex Mono';
		  font-style: normal;
		  font-weight: 400;
		  src: local("IBM Plex Mono"), local("IBMPlexMono"), url("fonts/IBMPlexMono-Regular-Latin2.woff2") format("woff2"), url("fonts/IBMPlexMono-Regular-Latin2.woff") format("woff");
		  unicode-range: 'U+0100-024F, U+0259, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF, U+FB01-FB02'; }

		@font-face {
		  font-family: 'IBM Plex Mono';
		  font-style: normal;
		  font-weight: 400;
		  src: local("IBM Plex Mono"), local("IBMPlexMono"), url("fonts/IBMPlexMono-Regular-Latin1.woff2") format("woff2"), url("fonts/IBMPlexMono-Regular-Latin1.woff") format("woff");
		  unicode-range: 'U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+20AC, U+2122, U+2212, U+FB01-FB02'; 
		}

	    /* RESET */
*,*:before,*:after{box-sizing:border-box;}html,body{margin:0;height:100%;}a{text-decoration:inherit;color:inherit;}p,h1,h2,h3,h4,h5,h6{margin:0;font-size:inherit;font-weight:inherit;}ul,ol{margin:0;padding:0;list-style-type:none;}img{display:inline-block;border:0;max-width:100%;height:auto;vertical-align:middle;}figure{margin:0;}
        
        html {
            -webkit-text-size-adjust : 100%;
        }
		body {
			font-family: 'IBM Plex Mono', 'Menlo', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Courier, monospace;
			font-size: 1.35vw;
			color: #FFFFFF;
			padding: 2%;
			text-transform: lowercase;
			background:black;
		}

		.header {
			height: 40vh;
			position: fixed;
			width: 100%;
			left: 0;
			padding: 2%;
			top: -0.8%;
			
		}
		.main-container {
			margin-top:38vh;
			padding-top:2%;
			z-index: 10;
			position: relative;
			padding-bottom:80vh;
			-webkit-box-shadow: 0 -20px 20px rgba(0, 0, 0, 1.0);
			box-shadow: 0 -20px 20px rgba(0, 0, 0, 1.0);
		}

		a:hover {
			text-decoration: underline;
		}


		header, main {
			display:-webkit-box;
			display:-ms-flexbox;
			display:flex;
			flex-wrap: wrap;
			padding-bottom: 4%;
		}
		main {
			padding-bottom: 8%;
		}

		img {
			-webkit-box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
			        box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
		}


		.no-prev {
			opacity:0.5;
			cursor: auto !important;
		}

		.playlist-track {
			display:-webkit-box;
			display:-ms-flexbox;
			display:flex;
			width:100%;
			cursor: pointer;
		}
		.track-number, .track-title, .track-duration, .track-spotify, .track-youtube {
			padding: 1%;
		}
/*
		.playlist-track:first-child div {
			padding-top: 0;
		}*/

		.playlist-image-container {
			padding-left: 2%;
			margin: 0% auto;
			width: 40%;
			padding-right: 10%;

		}
		.playlist-title, .header-title, .playlist-tracks, .playlist-meta, .header-byline {
			width: 60%;
			padding-right: 10%;
			margin: 0% auto;
		}

		}

		.playlist-tracks {
			margin-top: -1%;
		}

		.playlist-meta, .header-byline {
			display:-webkit-box;
			display:-ms-flexbox;
			display:flex;
		}

		.track-title, .playlist-source, .header-content {
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
			width: 100%;
		}
	
		.track-number:after {
			display: block;
			position: absolute;
			top: 14%;
			height: 100%;
			padding: 1%;
			visibility: hidden;
		}
		.playlist-track:not(.no-prev):hover .track-number:after {
			content: ">";
			visibility: visible;
		}
			

		.track-duration, .playlist-duration, .header-follow {
			text-align: right;
			width: 14%;
		}

		.track-number, .playlist-src-meta, .header-meta {
			width: 7%;
			position: relative;
		}
		.playlist-track:hover:not(.no-prev) .track-number, .playlist-track.playing .track-number {
			visibility: hidden;
		}
		.playlist-track.playing .track-number:after, .playlist-track.playing:hover .track-number:after {
			content:"ıı";
			visibility: visible;
		}

		.playlist-meta div, .header-byline div {
			padding: 0 1%;
		}
		.show-mob {
			display: none;
		}

		@media all and (max-width: 568px) {
			body {
				font-size: 3.5vw;
				padding: 4%;
			}

			.playlist-image-container, .playlist-title, .playlist-tracks, .playlist-meta, .header-byline, .header-title {
				width: 100%;
				padding-right: 0%;
			}

			.playlist-src-meta {
				opacity: 0;
			}
			.show-mob {
				display: inline;
			}
			.playlist-image-container {
				padding-left: 0%;
				padding-bottom: 4%;
			}

			.header {
				display:block;
				padding:4%;
			}

			.playlist-duration {
				width: 30%;
			}



		}

		@media all and (max-width:768px) {
			a:hover {
				text-decoration: none;
			}

		

		}
	</style>
</head>
<body>
	<header class="header">
	    <h1 class="header-title">the goings on</h1>
	    <div class="header-byline"><div class="header-meta">12</div><div class="header-content">tunes, curated weekly.</div><div class="header-follow"><a href="https://instagram.com/thegoings_on" target="_blank">follow</a></div></div>
	</header>
	<article>
		<header>
		<div class="playlist-meta">
				<div class="main-container">
				{% for playlist in playlists %}
			<div class="playlist-src-meta">on</div>
				<h2 class="playlist-title"></h2>
			<div class="playlist-source"><span class="show-mob">(</span><a href="{{ playlist.spotifyLink }}" target="_blank">spotify</a><span class="show-mob">)</span></div>
			<div class="playlist-duration">{{ playlist.duration }}</div>
		</div>
		</header>
		<main>
			<div class="playlist-image-container"><<a href="{{ playlist.spotifyLink }}" target="_blank"><img src="{{ playlist.image }}"/></a></div>
			<div class="playlist-tracks">
				{% for track in playlist.tracks %}
			    <div class="playlist-track {% if not track.preview %}no-prev{% endif %}" data-preview="{{ track.preview }}">
			    	<div class="track-number">{{ track.number }}</div>
			    	<div class="track-title"> {{ track.artist }} – {{ track.title }}</div>
			    	<div class="track-duration"> {{ track.duration }}</div>
			    </div>
			    {% endfor %}
			</div>
		</main>
	</article>
	{% endfor %}
	</div>
	<audio>
	<source src=""></source>
	Your browser isn't invited for super fun audio time.
	</audio>
	<script type="text/javascript">
		var audio = document.querySelector('audio');
		audio.onended = function() {
		    document.querySelector('.playing').classList.remove('playing');
		};
		var tracks = document.querySelectorAll('.playlist-track:not(.no-prev)'), x;
	    for (x = 0; x < tracks.length; x++) {
	        tracks[x].addEventListener('click', function(e){
	        	if (e.target.tagName === 'A') return;
	        	if (e.currentTarget.classList.contains('playing')){
	        		audio.pause();
	        		// e.currentTarget.innerText = 'play';
	        		e.currentTarget.classList.remove('playing');
	        	} else {
	        		audio.pause();
	        		audio.src = e.currentTarget.dataset.preview;
	        		promise = audio.play();
	        		if (promise !== undefined) {
						  promise.then(_ => {
						    
						  }).catch(error => {
						  });
					}
	        		if (document.querySelector('.playing')) {
	        			// document.querySelector('.playing').innerText = 'play';
	        			document.querySelector('.playing').classList.remove('playing');
	        		}
	        		e.currentTarget.classList.add('playing');
	        		// e.currentTarget.innerText = 'pause';
	        	}
	        });
	       
	    }
	</script>

</body>
</html>